<!DOCTYPE html>
<html>
<head>
  <title>Admin Dashboard</title>
  <link rel="stylesheet" href="<%= BASE_PATH %>/style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
</head>
<body>
    <h1>NHS PhysioHUB - Admin Dashboard</h1>
    <hr>
    <br>
    <% if (messages.success) { %>
      <p class="success"><%= messages.success %></p>
    <% } %>
    <% if (messages.error) { %>
      <p class="error"><%= messages.error %></p>
    <% } %>

    <table>
        <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Role</th>
            <th>Illness</th>
            <th>Actions</th>
        </tr>
        <% patients.forEach(p => { %>
          <tr>

            <td><%= escapeHTML(p.name) %> <%= escapeHTML(p.surname) %></td>

            <td><%= escapeHTML(p.email) %></td>

            <td><%= escapeHTML(p.role) %></td>

            <td><%= escapeHTML(p.illness) || 'None' %></td>
            <td>

              <a href="<%= BASE_PATH %>/admin/edit/<%= p.id %>" class="action-btn edit-btn">Edit</a>

              <form method="POST" action="<%= BASE_PATH %>/admin/delete/<%= p.id %>" style="display:inline;">
                <button type="submit" class="action-btn delete-btn" onclick="return confirm('Deactivate this user?')">Deactivate</button>
              </form>
            </td>
          </tr>
        <% }); %>
    </table>
    <br>
    <a href="<%= BASE_PATH %>/">Home</a>

    <a href="<%= BASE_PATH %>/logout" style="margin-left: 20px;">Logout</a>
</body>
</html>